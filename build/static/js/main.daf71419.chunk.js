(this.webpackJsonphotstar=this.webpackJsonphotstar||[]).push([[0],{22:function(e,t,s){},23:function(e,t,s){},30:function(e,t,s){"use strict";s.r(t);var o=s(9),n=s.n(o),a=s(17),r=s.n(a),i=(s(22),s(23),s(12)),c=s(11),l=c.a.initializeApp({apiKey:"AIzaSyCKCDBTr5k2BH6n6B8kwA-UjkBh1aaUXHA",authDomain:"logintask-e0b2b.firebaseapp.com",projectId:"logintask-e0b2b",storageBucket:"logintask-e0b2b.appspot.com",messagingSenderId:"188750000060",appId:"1:188750000060:web:40c7444e4187b7d042c5b9"}).firestore(),g=c.a.auth(),u=new c.a.auth.GoogleAuthProvider,m=(c.a.storage(),l),d=s(8);var b=function(){var e=Object(o.useState)("abc"),t=Object(i.a)(e,2),s=t[0],n=t[1],a=Object(o.useState)(!1),r=Object(i.a)(a,2),c=r[0],l=r[1],b=Object(o.useState)(!1),h=Object(i.a)(b,2),j=h[0],f=h[1];return Object(o.useEffect)((function(){m.collection("users").doc(sessionStorage.getItem("user")?sessionStorage.getItem("user"):s).onSnapshot((function(e){var t,s=null===(t=e.data())||void 0===t?void 0:t.logInfo;sessionStorage.getItem("refreshToken")===s?f(!0):console.log("not now")}))}),[s]),Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(d.jsx)("button",{onClick:function(){g.setPersistence("session").then((function(){g.signInWithPopup(u).then((function(e){var t=e.user;sessionStorage.setItem("refreshToken",t.refreshToken),sessionStorage.setItem("user",t.uid),sessionStorage.setItem("name",t.displayName),sessionStorage.setItem("email",t.email),n(sessionStorage.getItem("user"));var s=m.collection("users").doc(t.uid);s.get().then((function(e){e.exists?sessionStorage.getItem("refreshToken")===e.data().logInfo?console.log("you are good to go"):l(!0):s.set({name:t.displayName,email:t.email,logInfo:t.refreshToken})}))}))}))},children:"Log in"}),c&&!j&&Object(d.jsx)("button",{onClick:function(){m.collection("users").doc(sessionStorage.getItem("user")).update({name:sessionStorage.getItem("name"),email:sessionStorage.getItem("email"),logInfo:sessionStorage.getItem("refreshToken")})},children:"You are logged in using the same email ID on another tab/browser/device. Do you wish to logout from all others and continue on this tab?"}),j&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["Current User Name: ",sessionStorage.getItem("name")]}),Object(d.jsxs)("p",{children:["Current User: ",sessionStorage.getItem("email")]}),Object(d.jsx)("p",{children:"you are logged in"})]})]})};var h=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(b,{})})};r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.daf71419.chunk.js.map