{"version":3,"sources":["components/firebase.js","components/Header.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","auth","provider","GoogleAuthProvider","storage","Header","useState","users","setUser","logInfo","setLogInfo","loadData","setLoadData","useEffect","collection","doc","sessionStorage","getItem","onSnapshot","result","data","console","log","style","display","justifyContent","alignItems","flexDirection","onClick","setPersistence","then","signInWithPopup","user","setItem","refreshToken","uid","displayName","email","info","get","exists","set","name","update","App","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uNAUMA,EADcC,IAASC,cARN,CACrBC,OAAQ,0CACRC,WAAY,kCACZC,UAAW,kBACXC,cAAe,8BACfC,kBAAmB,eACnBC,MAAO,8CAGcC,YACjBC,EAAOT,IAASS,OAEhBC,EAAW,IAAIV,IAASS,KAAKE,mBAKpBZ,GAJCC,IAASY,UAIVb,G,OC2EAc,MAzFf,WACE,MAAyBC,mBAAS,OAAlC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAAgCJ,oBAAS,GAAzC,mBAAOK,EAAP,KAAiBC,EAAjB,KA0DA,OAxDAC,qBAAU,WACRtB,EAAGuB,WAAW,SACXC,IACEC,eAAeC,QAAQ,QAAkBD,eAAeC,QAAQ,QAA/BV,GAEnCW,YAAW,SAACC,GAAY,IAAD,EAChBC,EAAI,UAAGD,EAAOC,cAAV,aAAG,EAAeX,QACxBO,eAAeC,QAAQ,kBAAoBG,EAC7CR,GAAY,GAEZS,QAAQC,IAAI,gBAGjB,CAACf,IA4CF,sBACEgB,MAAO,CACLC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,cAAe,UALnB,UAQE,wBAAQC,QAlDE,WACZ3B,EAAK4B,eAAe,WAAWC,MAAK,WAClC7B,EAAK8B,gBAAgB7B,GAAU4B,MAAK,SAACX,GACnC,IAAIC,EAAOD,EAAOa,KAElBhB,eAAeiB,QAAQ,eAAgBb,EAAKc,cAC5ClB,eAAeiB,QAAQ,OAAQb,EAAKe,KACpCnB,eAAeiB,QAAQ,OAAQb,EAAKgB,aACpCpB,eAAeiB,QAAQ,QAASb,EAAKiB,OACrC7B,EAAQQ,eAAeC,QAAQ,SAE/B,IAAMqB,EAAO/C,EAAGuB,WAAW,SAASC,IAAIK,EAAKe,KAC7CG,EAAKC,MAAMT,MAAK,SAACf,GACXA,EAAIyB,OACexB,eAAeC,QAAQ,kBACvBF,EAAIK,OAAOX,QAC9BY,QAAQC,IAAI,sBAEZZ,GAAW,GAGb4B,EAAKG,IAAI,CACPC,KAAMtB,EAAKgB,YACXC,MAAOjB,EAAKiB,MACZ5B,QAASW,EAAKc,yBA0BtB,oBACCzB,IAAYE,GACX,wBAAQiB,QArBO,WACnBrC,EAAGuB,WAAW,SACXC,IAAIC,eAAeC,QAAQ,SAC3B0B,OAAO,CACND,KAAM1B,eAAeC,QAAQ,QAC7BoB,MAAOrB,eAAeC,QAAQ,SAC9BR,QAASO,eAAeC,QAAQ,mBAehC,sJAMDN,GACC,qCACE,oDAAuBK,eAAeC,QAAQ,WAC9C,+CAAkBD,eAAeC,QAAQ,YACzC,yDCxEK2B,MARf,WACE,OACE,qBAAKC,UAAU,MAAf,SACE,cAAC,EAAD,OCJNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.daf71419.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCKCDBTr5k2BH6n6B8kwA-UjkBh1aaUXHA\",\r\n  authDomain: \"logintask-e0b2b.firebaseapp.com\",\r\n  projectId: \"logintask-e0b2b\",\r\n  storageBucket: \"logintask-e0b2b.appspot.com\",\r\n  messagingSenderId: \"188750000060\",\r\n  appId: \"1:188750000060:web:40c7444e4187b7d042c5b9\",\r\n};\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\nconst db = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nconst storage = firebase.storage();\r\n\r\nexport { auth, provider, storage };\r\n\r\nexport default db;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport db, { auth, provider } from \"./firebase\";\r\n\r\nfunction Header() {\r\n  const [users, setUser] = useState(\"abc\");\r\n  const [logInfo, setLogInfo] = useState(false);\r\n  const [loadData, setLoadData] = useState(false);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(\r\n        !sessionStorage.getItem(\"user\") ? users : sessionStorage.getItem(\"user\")\r\n      )\r\n      .onSnapshot((result) => {\r\n        const data = result.data()?.logInfo;\r\n        if (sessionStorage.getItem(\"refreshToken\") === data) {\r\n          setLoadData(true);\r\n        } else {\r\n          console.log(\"not now\");\r\n        }\r\n      });\r\n  }, [users]);\r\n\r\n  const login = () => {\r\n    auth.setPersistence(\"session\").then(() => {\r\n      auth.signInWithPopup(provider).then((result) => {\r\n        let data = result.user;\r\n\r\n        sessionStorage.setItem(\"refreshToken\", data.refreshToken);\r\n        sessionStorage.setItem(\"user\", data.uid);\r\n        sessionStorage.setItem(\"name\", data.displayName);\r\n        sessionStorage.setItem(\"email\", data.email);\r\n        setUser(sessionStorage.getItem(\"user\"));\r\n\r\n        const info = db.collection(\"users\").doc(data.uid);\r\n        info.get().then((doc) => {\r\n          if (doc.exists) {\r\n            const sessionToken = sessionStorage.getItem(\"refreshToken\");\r\n            if (sessionToken === doc.data().logInfo) {\r\n              console.log(\"you are good to go\");\r\n            } else {\r\n              setLogInfo(true);\r\n            }\r\n          } else {\r\n            info.set({\r\n              name: data.displayName,\r\n              email: data.email,\r\n              logInfo: data.refreshToken,\r\n            });\r\n          }\r\n        });\r\n      });\r\n    });\r\n  };\r\n  const setUserLogin = () => {\r\n    db.collection(\"users\")\r\n      .doc(sessionStorage.getItem(\"user\"))\r\n      .update({\r\n        name: sessionStorage.getItem(\"name\"),\r\n        email: sessionStorage.getItem(\"email\"),\r\n        logInfo: sessionStorage.getItem(\"refreshToken\"),\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n      <button onClick={login}>Log in</button>\r\n      {logInfo && !loadData && (\r\n        <button onClick={setUserLogin}>\r\n          You are logged in using the same email ID on another\r\n          tab/browser/device. Do you wish to logout from all others and continue\r\n          on this tab?\r\n        </button>\r\n      )}\r\n      {loadData && (\r\n        <>\r\n          <p>Current User Name: {sessionStorage.getItem(\"name\")}</p>\r\n          <p>Current User: {sessionStorage.getItem(\"email\")}</p>\r\n          <p>you are logged in</p>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\n\r\nimport \"./App.css\";\r\n\r\nimport Header from \"./components/Header\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Header />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}